{% extends 'base.html.twig' %}

{% block title %}
  Accueil - VersusBrawl
{% endblock %}

{% block body %}
  <div class="navbar">
    <h2>Jeux disponibles</h2>
    <ul>
      {% for game in games %}
        <li>{{ game.name|title }}</li>
      {% endfor %}
    </ul>
    {% if app.user %}
      <p class="mt-2">
        <a href="{{ path('app_user_teams') }}" class="inline-block bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">Mes équipes</a>
      </p>
    {% endif %}
  </div>

  <div class="last-events">
    <h2>Événements à venir</h2>
    <p>
      <a href="{{ path('app_event') }}" class="inline-block bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">Voir tous les événements</a>
    </p>
    <div class="events-grid" style="display: flex; gap: 20px; flex-wrap: wrap;">
      {% set today = 'now'|date('Y-m-d') %}
      {% set hasUpcoming = false %}
      {% for event in lastEvents %}
        {% if (event.date|date('Y-m-d')) >= today %}
          {% set hasUpcoming = true %}
          <div class="event-card" style="border: 1px solid #ccc; padding: 10px; width: 250px;">
            {% if event.image %}
              <img src="{{ asset('images/events/' ~ event.image) }}" alt="{{ event.name }}" style="width: 100%;" />
            {% else %}
              <img src="{{ asset('images/heroes/' ~ event.game.slug ~ '_heroes.png') }}" alt="{{ event.game.name }}" style="width: 100%;" />
            {% endif %}
            <h3><a href="{{ path('app_event_show', { slug: event.game.slug, id: event.id }) }}" style="text-decoration: none; color: inherit;">{{ event.name }}</a></h3>
            <p>
              <strong>Jeu :</strong> {{ event.game.name|title }}
            </p>
            <p>
              <strong>Date :</strong> {{ event.date|date('d/m/Y') }}
            </p>
            <p>{{ event.description }}</p>
            <p>
              <a href="{{ path('app_event_show', { slug: event.game.slug, id: event.id }) }}" class="inline-block bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">Voir l'événement</a>
            </p>
          </div>
        {% endif %}
      {% endfor %}

      {% if not hasUpcoming %}
        <p>Aucun événement à venir trouvé.</p>
      {% endif %}
    </div>
  </div>
{% endblock %}
